<%- include( '../layout/_header', {title: '墨田区'} ); %>
  <script>
    function double(btn){
      btn.disabled = true;
      document.getElementById('bst-loading').classList.remove('d-none')
      btn.form.submit();
    }
  </script>
  <div class="container">
    <h1 class="text-center">墨田区</h1>
    <form action="/sumida-ku">
      <select name="month" class="form-select form-select-lg mb-3">
        <option selected disabled>対象月</option>
        <option value="01">1月</option>
        <option value="02">2月</option>
        <option value="03">3月</option>
        <option value="04">4月</option>
        <option value="05">5月</option>
        <option value="06">6月</option>
        <option value="07">7月</option>
        <option value="08">8月</option>
        <option value="09">9月</option>
        <option value="10">10月</option>
        <option value="11">11月</option>
        <option value="12">12月</option>
      </select>
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" value="shakai" name="buildingkeys[]" checked>
        <label class="form-check-label">社会福祉会館</label>
      </div>
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" value="hikifine" name="buildingkeys[]" checked>
        <label class="form-check-label">曳舟文化センター</label>
      </div>
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" value="midori" name="buildingkeys[]" checked>
        <label class="form-check-label">みどりコミュニティセンター</label>
      </div>
      <div class="alert alert-warning" role="alert">
        エラー出ずに画像が表示されなかったら空きが無いです
      </div>
      <button type="submit" class="btn btn-primary" onClick="javascript:double(this)">確認</button>
      <div id="bst-loading" class="d-none">
        <div class="spinner-border" role="status"></div>結構時間かかります
      </div>
    </form>
    <% if (error != null) { %>
      <div class="alert alert-danger" role="alert">
        <%= error %>
        <p>管理者に問い合わせてください</p>
      </div>
    <% } %>
  </div>
  <% if (month != null) { %>
    <h1><%= month %>月 空き状況</h1>
    <% if (error == null) { %>
      <div class="d-flex">
        <% buildingkeys.forEach(buildingkey => { %>
          <div><img src="/screenshots/sumida-ku/<%= buildingkey %>_<%= month %>.png"></div>
        <% }) %>
      </div>
    <% } %>
  <% } %>
<%- include( '../layout/_footer' ); %>
