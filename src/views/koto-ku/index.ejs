<%- include( '../layout/_header', {title: '江東区'} ); %>
  <script>
    function double(btn){
      btn.disabled = true;
      document.getElementById('bst-loading').classList.remove('d-none')
      btn.form.submit();
    }
  </script>
  <div class="container">
    <h1 class="text-center">江東区</h1>
    <form action="/koto-ku">
      <select name="month" class="form-select form-select-lg mb-3">
        <option selected disabled>対象月</option>
        <option value="01">1月</option>
        <option value="02">2月</option>
        <option value="03">3月</option>
        <option value="04">4月</option>
        <option value="05">5月</option>
        <option value="06">6月</option>
        <option value="07">7月</option>
        <option value="08">8月</option>
        <option value="09">9月</option>
        <option value="10">10月</option>
        <option value="11">11月</option>
        <option value="12">12月</option>
      </select>
      <input class="form-control form-control-lg mb-3" name="day" type="number" placeholder="開始日付(1〜31)" min=1 max=31 value="<%= day ? day : 1 %>">
      <div class="alert alert-warning" role="alert">
        今日以降の日付をテキスト入れてください
      </div>
      <button type="submit" class="btn btn-primary" onClick="javascript:double(this)">確認</button>
      <div id="bst-loading" class="d-none">
        <div class="spinner-border" role="status"></div>結構時間かかります
      </div>
    </form>
    <% if (error != null) { %>
      <div class="alert alert-danger" role="alert">
        <%= error %>
        <p>管理者に問い合わせてください</p>
      </div>
    <% } %>
  </div>
  <% if (month != null) { %>
    <h1><%= month %>月 空き状況</h1>
    <% if (error == null) { %>
      <img src="/screenshots/koto-ku/<%= month %>_<%= day %>_99.png">
      <% for (let i = 1; i < 20; ++i) { %>
        <img src="/screenshots/koto-ku/<%= month %>_<%= day %>_<%= i %>.png">
      <% } %>
    <% } %>
  <% } %>
<%- include( '../layout/_footer' ); %>
